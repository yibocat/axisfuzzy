# 隶属函数测试模块

本目录包含 AxisFuzzy 隶属函数模块的完整测试套件，确保所有隶属函数的正确性、性能和可靠性。

## 测试结构

### 核心测试文件

#### `test_base.py`
- **目标**: 测试 `MembershipFunction` 基类
- **覆盖范围**:
  - 抽象方法接口验证
  - 基类初始化和属性
  - 参数管理系统
  - 继承机制正确性

#### `test_function.py`
- **目标**: 测试所有9种标准隶属函数
- **覆盖范围**:
  - **数学正确性**: 验证每个函数的数学计算
  - **参数验证**: 测试参数约束和边界条件
  - **边界行为**: 测试极值和特殊情况
  - **性能测试**: 大数组计算性能
- **测试的隶属函数**:
  - `TriangularMF` - 三角形隶属函数
  - `TrapezoidalMF` - 梯形隶属函数
  - `GaussianMF` - 高斯隶属函数
  - `SigmoidMF` - Sigmoid 隶属函数
  - `SMF` - S形隶属函数
  - `ZMF` - Z形隶属函数
  - `PiMF` - Π形隶属函数
  - `GeneralizedBellMF` - 广义钟形隶属函数
  - `DoubleGaussianMF` - 双高斯隶属函数

#### `test_factory.py`
- **目标**: 测试工厂函数系统
- **覆盖范围**:
  - **类发现机制**: `get_mf_class()` 函数测试
  - **别名系统**: 标准别名和自动生成别名
  - **参数分离**: `create_mf()` 的参数处理
  - **错误处理**: 无效输入和异常传播
  - **集成测试**: 工厂与隶属函数的完整集成
  - **文档一致性**: 确保文档示例的正确性

#### `test_visualization.py`
- **目标**: 测试隶属函数可视化功能
- **覆盖范围**:
  - 基本绘图功能
  - 多函数对比绘图
  - 自定义样式和参数
  - 图形输出验证

### 配置文件

#### `conftest.py`
- **功能**: 测试环境配置和共享 fixtures
- **内容**:
  - 全局测试常量（如 `TOLERANCE`）
  - 共享的测试数据和 fixtures
  - 测试环境设置

## 测试覆盖范围

### 功能覆盖
- ✅ **基类接口**: 100% 覆盖抽象方法和基础功能
- ✅ **隶属函数**: 100% 覆盖所有9种标准函数
- ✅ **工厂系统**: 100% 覆盖类发现和创建机制
- ✅ **别名系统**: 100% 覆盖标准别名和自动别名
- ✅ **参数处理**: 100% 覆盖参数验证和分离
- ✅ **错误处理**: 100% 覆盖异常情况和错误传播
- ✅ **可视化**: 100% 覆盖绘图功能

### 测试类型
- **单元测试**: 测试单个函数和方法
- **集成测试**: 测试模块间交互
- **性能测试**: 测试大数据量处理
- **边界测试**: 测试极值和特殊情况
- **错误测试**: 测试异常处理

## 运行测试

### 运行所有隶属函数测试
```bash
pytest test/test_membership/ -v
```

### 运行特定测试文件
```bash
# 测试基类
pytest test/test_membership/test_base.py -v

# 测试隶属函数
pytest test/test_membership/test_function.py -v

# 测试工厂系统
pytest test/test_membership/test_factory.py -v

# 测试可视化
pytest test/test_membership/test_visualization.py -v
```

### 运行特定测试类
```bash
# 测试三角形隶属函数
pytest test/test_membership/test_function.py::TestTriangularMF -v

# 测试工厂类发现
pytest test/test_membership/test_factory.py::TestGetMFClass -v
```

### 生成覆盖率报告
```bash
pytest test/test_membership/ --cov=axisfuzzy.membership --cov-report=html
```

## 测试数据和常量

### 测试精度
- `TOLERANCE = 1e-10`: 数值比较的默认容差
- 用于浮点数比较和数学计算验证

### 测试数据集
- **标准测试点**: `[0, 0.25, 0.5, 0.75, 1]`
- **边界测试点**: `[-0.5, 0, 1, 1.5]`
- **大数组测试**: `np.linspace(0, 1, 10000)`

## 质量保证

### 测试原则
1. **完整性**: 覆盖所有公共接口和功能
2. **正确性**: 验证数学计算的准确性
3. **鲁棒性**: 测试边界条件和异常情况
4. **性能**: 确保大数据量处理的效率
5. **一致性**: 保证接口和行为的一致性

### 测试标准
- 所有测试必须通过
- 代码覆盖率 > 95%
- 性能测试不能有显著退化
- 文档示例必须可执行且正确

## 维护指南

### 添加新的隶属函数
1. 在 `test_function.py` 中添加对应的测试类
2. 实现完整的测试方法（初始化、计算、参数验证等）
3. 在 `test_factory.py` 中更新工厂测试
4. 更新本 README 文档

### 修改现有测试
1. 确保修改不会降低测试覆盖率
2. 更新相关的集成测试
3. 验证所有测试仍然通过
4. 更新文档（如有必要）

### 性能基准
- 单个隶属函数计算: < 1ms (1000个点)
- 大数组计算: < 100ms (10000个点)
- 工厂创建开销: < 1ms

---

**注意**: 本测试套件是 AxisFuzzy 质量保证的重要组成部分。所有代码变更都应该通过完整的测试验证，确保系统的稳定性和可靠性。